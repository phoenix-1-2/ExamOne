---
openapi: 3.0.0
info:
  title: ExamOne API
  description: ExamOne APIs for Backend
  contact:
    email: phoenix.redstone.04@gmail.com
  version: "v1.0.0"
servers:
  - url: https://exam-one.herokuapp.com
tags:
  - name: Teacher
    description: Secured Teacher-only calls
  - name: Student
    description: Secured Student-only calls

components:
  securitySchemes:
    bearerAuth: # arbitrary name for the security scheme
      type: http
      scheme: bearer
      bearerFormat: JWT

paths:
  /student/login:
    post:
      tags:
        - Student
      summary: For Login authentication
      description: By passing the appropriate username and password student can login into the ExamOne Web Server.
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: "xyz@gmail.com"
                password:
                  type: string
                  example: "Xyz@123"

      responses:
        "200":
          description: Authenticated
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Authentication Successfull"
                  auth_key:
                    type: string
                    example: "d290f1ee-6c54-4b01-90e6-d701748f0851"

  /student/register:
    post:
      tags:
        - Student
      summary: Registration of a student
      description: Registration of a student
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
                image:
                  type: string
                  format: binary
                name:
                  type: string
                batch:
                  type: string
                gender:
                  type: string
                date_of_birth:
                  type: string
                  example: "12-04-2001"
                education_qualification:
                  type: object
                  properties:
                    education_qualification:
                      type: array
                      items:
                        type: object
                        properties:
                          degree_name:
                            type: string
                          institution_name:
                            type: string
                          CGPA:
                            type: number
                          from_year:
                            type: number
                          to_year:
                            type: number

      responses:
        "201":
          description: "Mail has been sent for the verfication"
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Verfication Mail Sent"

  /teacher/login:
    post:
      tags:
        - Teacher
      summary: For Login authentication
      description: By passing the appropriate username and password Teacher can login into the ExamOne Web Server.
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: "xyz@gmail.com"
                password:
                  type: string
                  example: "Xyz@123"

      responses:
        "200":
          description: Authenticated
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Authentication Successfull"
                  auth_key:
                    type: string
                    example: "d290f1ee-6c54-4b01-90e6-d701748f0851"

  /teacher/register:
    post:
      tags:
        - Teacher
      summary: Registration of a Teacher
      description: Registration of a Teacher
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
                image:
                  type: string
                  format: binary
                name:
                  type: string
                gender:
                  type: string
                date_of_birth:
                  type: string
                  example: "12-04-2001"
                education_qualification:
                  type: object
                  properties:
                    education_qualification:
                      type: object
                      properties:
                        education_qualification:
                          type: array
                          items:
                            type: object
                            properties:
                              degree_name:
                                type: string
                              institution_name:
                                type: string
                              CGPA:
                                type: number
                              from_year:
                                type: number
                              to_year:
                                type: number

      responses:
        "201":
          description: "Mail has been sent for the verfication"
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Verfication Mail Sent"

  /teacher/verify/{secret_code}/{teacher_id}:
    post:
      tags:
        - Teacher
      summary: Verfication Mail of a Teacher
      description: Verfication Mail of a Teacher
      parameters:
        - in: path
          name: secret_code
          schema:
            type: string

          required: true
        - in: path
          name: teacher_id
          schema:
            type: string

          required: true

      responses:
        "201":
          description: "Successfully Registrated"
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Registration Successfull"

  /student/verify/{secret_code}/{student_id}:
    post:
      tags:
        - Student
      summary: Verfication Mail of a Student
      description: Verfication Mail of a Student
      parameters:
        - in: path
          name: secret_code
          schema:
            type: string

          required: true
        - in: path
          name: student_id
          schema:
            type: string

          required: true
      responses:
        "201":
          description: "Successfully Registrated"
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Registration Successfull"

  /teacher/profile:
    get:
      tags:
        - Teacher
      summary: Get Teacher Profile
      description: Get Teacher Profile
      security:
        - bearerAuth: []
      responses:
        "200":
          description: "Get Teacher Details"
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    type: string
                  password:
                    type: string
                  image_url:
                    type: string
                  name:
                    type: string
                  gender:
                    type: string
                  date_of_birth:
                    type: string
                  education_qualification:
                    type: object
                    properties:
                      education_qualification:
                        type: array
                        items:
                          type: object
                          properties:
                            degree_name:
                              type: string
                            institution_name:
                              type: string
                            CGPA:
                              type: number
                            from_year:
                              type: number
                            to_year:
                              type: number

    put:
      tags:
        - Teacher
      summary: Update Teacher Records
      description: Update Teacher Records
      security:
        - bearerAuth: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
                image:
                  type: string
                  format: binary
                name:
                  type: string
                gender:
                  type: string
                date_of_birth:
                  type: string
                  example: "12-04-2001"
                education_qualification:
                  type: object
                  properties:
                    education_qualification:
                      type: object
                      properties:
                        education_qualification:
                          type: array
                          items:
                            type: object
                            properties:
                              degree_name:
                                type: string
                              institution_name:
                                type: string
                              CGPA:
                                type: number
                              from_year:
                                type: number
                              to_year:
                                type: number

      responses:
        "200":
          description: "Successfully updated"
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Updatation Successfull"

  /student/profile:
    get:
      tags:
        - Student
      summary: Get Student Profile
      description: Get Student Profile
      security:
        - bearerAuth: []
      responses:
        "200":
          description: "Get Student Details"
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    type: string
                  batch:
                    type: string
                  password:
                    type: string
                  image_url:
                    type: string
                  name:
                    type: string
                  gender:
                    type: string
                  date_of_birth:
                    type: string
                  education_qualification:
                    type: object
                    properties:
                      education_qualification:
                        type: array
                        items:
                          type: object
                          properties:
                            degree_name:
                              type: string
                            institution_name:
                              type: string
                            CGPA:
                              type: number
                            from_year:
                              type: number
                            to_year:
                              type: number

    put:
      tags:
        - Student
      summary: Update Student Records
      description: Update Student Records
      security:
        - bearerAuth: []

      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
                image:
                  type: string
                  format: binary
                name:
                  type: string
                batch:
                  type: string
                gender:
                  type: string
                date_of_birth:
                  type: string
                  example: "12-04-2001"
                education_qualification:
                  type: object
                  properties:
                    education_qualification:
                      type: object
                      properties:
                        education_qualification:
                          type: array
                          items:
                            type: object
                            properties:
                              degree_name:
                                type: string
                              institution_name:
                                type: string
                              CGPA:
                                type: number
                              from_year:
                                type: number
                              to_year:
                                type: number

      responses:
        "200":
          description: "Successfully updated"
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Updatation Successfull"

  /teacher/exam:
    post:
      tags:
        - Teacher
      summary: For Creating Examination
      description: Create Exam with appropriate parameters
      security:
        - bearerAuth: []

      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                examination_name:
                  type: string
                  example: "End-Term Examination"
                batch:
                  type: string
                  example: "B11"
                total_marks:
                  type: number
                  example: 100.0
                exam_period:
                  type: number
                  example: 120
                expiry_date:
                  type: string
                  example: "2017-07-21T17:32:28Z"
                questions_and_solutions:
                  type: object
                  properties:
                    questions_and_solutions:
                      type: object
                      properties:
                        mcq:
                          type: array
                          items:
                            type: object
                            properties:
                              question_id:
                                type: string
                              question:
                                type: string
                              option1:
                                type: string
                              option2:
                                type: string
                              option3:
                                type: string
                              option4:
                                type: string
                              solution:
                                type: string
                              total_marks:
                                type: number
                        subjective:
                          type: array
                          items:
                            type: object
                            properties:
                              question_id:
                                type: string
                              question:
                                type: string
                              solution:
                                type: string
                              total_marks:
                                type: number
                        coding:
                          type: array
                          items:
                            type: object
                            properties:
                              question_id:
                                type: string
                              question:
                                type: string
                              test_cases:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    test_case:
                                      type: string
                                    result:
                                      type: string
                              total_marks:
                                type: number

      responses:
        "201":
          description: "Successfully created the examination"
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Created Successfully"

  /teacher/exam/{exam_id}:
    delete:
      tags:
        - Teacher
      summary: For Deleting Examination
      description: Delete Exam
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: exam_id
          schema:
            type: string

          required: true
      responses:
        "204":
          description: "Successfully deleted the examination"
          content:
            application/json:
              schema:
                properties:
                  message:
                    type: string
                    example: "Deleted Successfully"

  /teacher/exam/_all:
    get:
      tags:
        - Teacher
      summary: For getting all the Examinations
      description: Get all Exams
      security:
        - bearerAuth: []
      responses:
        "200":
          description: "Get all examinations"
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: number
                  exams:
                    type: array
                    items:
                      type: object
                      properties:
                        exam_id:
                          type: string
                        examination_name:
                          type: string
                        batch:
                          type: string
                        total_marks:
                          type: number
                        exam_period:
                          type: string
                        expiry_date:
                          type: string

  /student/exam/undone_exams:
    get:
      tags:
        - Student
      summary: For getting all the Undone Examinations
      description: Get all Undone Exams
      security:
        - bearerAuth: []
      responses:
        "200":
          description: "Get all undone examinations"
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: number
                  exams:
                    type: array
                    items:
                      type: object
                      properties:
                        exam_id:
                          type: string
                        examination_name:
                          type: string
                          example: "End-Term Examination"
                        batch:
                          type: string
                          example: "B11"
                        total_marks:
                          type: number
                          example: 100.0
                        exam_period:
                          type: number
                          example: 120
                        expiry_date:
                          type: string
                          example: "2017-07-21T17:32:28Z"

  /student/exam/{exam_id}/_info:
    get:
      tags:
        - Student
      summary: For Examination Information
      description: Get Exam Info
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: exam_id
          schema:
            type: string

          required: true
      responses:
        "200":
          description: "Get Exam Info"
          content:
            application/json:
              schema:
                properties:
                  exam_info:
                    type: object
                    properties:
                      examination_name:
                        type: string
                        example: "End-Term Examination"
                      batch:
                        type: string
                        example: "B11"
                      total_marks:
                        type: number
                        example: 100.0
                      exam_period:
                        type: number
                        example: 120
                      expiry_date:
                        type: string
                        example: "2017-07-21T17:32:28Z"
                      total_mcqs:
                        type: integer
                        example: 5
                      total_subjective_questions:
                        type: integer
                        example: 5
                      total_coding_problems:
                        type: integer
                        example: 2

  /student/exam/{exam_id}:
    get:
      tags:
        - Student
      summary: For Examination Question
      description: Get Exam Question
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: exam_id
          schema:
            type: string

          required: true
      responses:
        "200":
          description: "Get Exam Questions"
          content:
            application/json:
              schema:
                type: object
                properties:
                  question_set:
                    type: object
                    properties:
                      total_mcqs:
                        type: number
                      total_subjective_questions:
                        type: number
                      total_coding_problems:
                        type: number
                      mcqs:
                        type: array
                        items:
                          type: object
                          properties:
                            question_id:
                              type: string
                            question:
                              type: string
                            option1:
                              type: string
                            option2:
                              type: string
                            option3:
                              type: string
                            option4:
                              type: string
                            total_marks:
                              type: number
                      subjective:
                        type: array
                        items:
                          type: object
                          properties:
                            question_id:
                              type: string
                            question:
                              type: string
                            total_marks:
                              type: number
                      coding:
                        type: array
                        items:
                          type: object
                          properties:
                            question_id:
                              type: string
                            question:
                              type: string
                            limited_test_cases:
                              type: array
                              items:
                                type: object
                                properties:
                                  test_case:
                                    type: string
                                  result:
                                    type: string
                            total_marks:
                              type: number
                  total_marks:
                    type: number

  /student/exam/{exam_id}/evaluate:
    post:
      tags:
        - Student
      summary: For Evaluation of Examination
      description: Evalaute the Examination
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: exam_id
          schema:
            type: string

          required: true
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                student_solutions:
                  type: object
                  properties:
                    mcq:
                      type: array
                      items:
                        type: object
                        properties:
                          question_id:
                            type: string
                          solution:
                            type: string
                    subjective:
                      type: array
                      items:
                        type: object
                        properties:
                          question_id:
                            type: string
                          solution:
                            type: string
                    coding:
                      type: array
                      items:
                        type: object
                        properties:
                          question_id:
                            type: string
                          source_code:
                            type: string

      responses:
        "200":
          description: Examination Evaluated
          content:
            application/json:
              schema:
                properties:
                  student_name:
                    type: string
                    example: XYZ
                  teacher_name:
                    type: string
                    example: XYZ
                  batch:
                    type: string
                    example: B11
                  marks:
                    type: number
                    example: 98
                  exam_start_date_time:
                    type: string
                    example: "2017-07-21T17:32:28Z"
                  total_marks:
                    type: number
                    example: 100
                  grade:
                    type: string
                    example: "A+"

  /student/results/{exam_id}:
    get:
      tags:
        - Student
      summary: For Result of Examination
      description: Examination Result
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: exam_id
          schema:
            type: string

          required: true
      responses:
        "200":
          description: Get the examination result
          content:
            application/json:
              schema:
                type: object
                properties:
                  exam_name:
                    type: string
                  exam_start_date_time:
                    type: string
                  student_name:
                    type: string
                  teacher_name:
                    type: string
                  score:
                    type: number
                  max_score:
                    type: number
                  grade:
                    type: string
                  report:
                    type: object
                    properties:
                      mcq:
                        type: object
                        properties:
                          total_marks:
                            type: number
                          marks_acheived:
                            type: number
                          exam_set:
                            type: array
                            items:
                              type: object
                              properties:
                                question_id:
                                  type: string
                                question:
                                  type: string
                                option1:
                                  type: string
                                option2:
                                  type: string
                                option3:
                                  type: string
                                option4:
                                  type: string
                                total_marks:
                                  type: number
                                original_solution:
                                  type: string
                                student_solution:
                                  type: string
                                marks_acheived:
                                  type: number
                      subjective:
                        type: object
                        properties:
                          total_marks:
                            type: number
                          marks_acheived:
                            type: number
                          exam_set:
                            type: array
                            items:
                              type: object
                              properties:
                                question_id:
                                  type: string
                                question:
                                  type: string
                                total_marks:
                                  type: number
                                original_solution:
                                  type: string
                                student_solution:
                                  type: string
                                marks_acheived:
                                  type: number
                      coding:
                        type: object
                        properties:
                          total_marks:
                            type: number
                          marks_acheived:
                            type: number
                          exam_set:
                            type: array
                            items:
                              type: object
                              properties:
                                question_id:
                                  type: string
                                question:
                                  type: string
                                total_marks:
                                  type: number
                                student_source_code:
                                  type: string
                                test_cases:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      test_case:
                                        type: string
                                      student_result:
                                        type: string
                                      original_result:
                                        type: string
                                      passed:
                                        type: boolean
                                marks_acheived:
                                  type: number
                                total_test_cases_success:
                                  type: number
                                total_test_cases_count:
                                  type: number

  /teacher/results/{exam_id}/{student_id}:
    get:
      tags:
        - Teacher
      summary: For Result of Examination
      description: Examination Result
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: exam_id
          schema:
            type: string

          required: true
        - in: path
          name: student_id
          schema:
            type: string

          required: true
      responses:
        "200":
          description: Get the examination result of student
          content:
            application/json:
              schema:
                type: object
                properties:
                  exam_name:
                    type: string
                  exam_start_date_time:
                    type: string
                  student_name:
                    type: string
                  teacher_name:
                    type: string
                  score:
                    type: number
                  max_score:
                    type: number
                  grade:
                    type: string
                  report:
                    type: object
                    properties:
                      mcq:
                        type: object
                        properties:
                          total_marks:
                            type: number
                          marks_acheived:
                            type: number
                          exam_set:
                            type: array
                            items:
                              type: object
                              properties:
                                question_id:
                                  type: string
                                question:
                                  type: string
                                option1:
                                  type: string
                                option2:
                                  type: string
                                option3:
                                  type: string
                                option4:
                                  type: string
                                total_marks:
                                  type: number
                                original_solution:
                                  type: string
                                student_solution:
                                  type: string
                                marks_acheived:
                                  type: number
                      subjective:
                        type: object
                        properties:
                          total_marks:
                            type: number
                          marks_acheived:
                            type: number
                          exam_set:
                            type: array
                            items:
                              type: object
                              properties:
                                question_id:
                                  type: string
                                question:
                                  type: string
                                total_marks:
                                  type: number
                                original_solution:
                                  type: string
                                student_solution:
                                  type: string
                                marks_acheived:
                                  type: number
                      coding:
                        type: object
                        properties:
                          total_marks:
                            type: number
                          marks_acheived:
                            type: number
                          exam_set:
                            type: array
                            items:
                              type: object
                              properties:
                                question_id:
                                  type: string
                                question:
                                  type: string
                                total_marks:
                                  type: number
                                student_source_code:
                                  type: string
                                test_cases:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      test_case:
                                        type: string
                                      student_result:
                                        type: string
                                      original_result:
                                        type: string
                                      passed:
                                        type: boolean
                                marks_acheived:
                                  type: number
                                total_test_cases_success:
                                  type: number
                                total_test_cases_count:
                                  type: number

  /teacher/results/{exam_id}:
    get:
      tags:
        - Teacher
      summary: Batch Result
      description: Examination Result of Batch
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: exam_id
          schema:
            type: string

          required: true

      responses:
        "200":
          description: Get the examination result of student
          content:
            application/json:
              schema:
                type: object
                properties:
                  exam_name:
                    type: string
                  teacher_name:
                    type: string
                  max_score:
                    type: number
                  avg_score:
                    type: number
                  highest_score:
                    type: object
                    properties:
                      student_name:
                        type: string
                      grade:
                        type: string
                      score:
                        type: number
                      url:
                        type: string
                  minimum_score:
                    type: object
                    properties:
                      student_name:
                        type: string
                      grade:
                        type: string
                      score:
                        type: number
                      url:
                        type: string
                  batch_report:
                    type: array
                    items:
                      type: object
                      properties:
                        student_name:
                          type: string
                        exam_start_date_time:
                          type: string
                        grade:
                          type: string
                        score:
                          type: number
                        url:
                          type: string
